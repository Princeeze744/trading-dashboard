<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trade2Retire | Professional Trading Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-blue: #0a1a4d;
            --secondary-blue: #152a75;
            --accent-yellow: #ffcc00;
            --light-yellow: #fff9e6;
            --white: #ffffff;
            --light-gray: #f5f7fa;
            --dark-gray: #0d1117;
            --success: #00e676;
            --warning: #ffc400;
            --danger: #ff5252;
            --grid-color: rgba(255, 255, 255, 0.05);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', sans-serif;
        }

        body {
            background-color: #050a1a;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(10, 26, 77, 0.3) 0%, transparent 30%),
                radial-gradient(circle at 90% 80%, rgba(10, 26, 77, 0.3) 0%, transparent 30%),
                linear-gradient(135deg, #050a1a, #0a1a4d);
            color: var(--white);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        .candlestick-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.03;
            z-index: -1;
            background-image: 
                url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect x="40" y="10" width="20" height="20" fill="white"/><rect x="40" y="70" width="20" height="20" fill="white"/><line x1="50" y1="30" x2="50" y2="70" stroke="white" stroke-width="3"/></svg>'),
                url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect x="40" y="50" width="20" height="20" fill="white"/><rect x="40" y="10" width="20" height="20" fill="white"/><line x1="50" y1="30" x2="50" y2="50" stroke="white" stroke-width="3"/></svg>');
            background-size: 120px 120px;
            background-position: 0 0, 60px 60px;
        }

        .container {
            max-width: 1800px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            margin-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }

        .logo h1 {
            font-size: 28px;
            font-weight: 700;
            background: linear-gradient(to right, var(--white), var(--accent-yellow));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: 1px;
            text-shadow: 0 0 10px rgba(255, 204, 0, 0.3);
        }

        .logo-icon {
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue));
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: 0 0 15px rgba(0, 123, 255, 0.4);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--secondary-blue), var(--accent-yellow));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            box-shadow: 0 0 10px rgba(255, 204, 0, 0.3);
        }

        .role-badge {
            background: var(--accent-yellow);
            color: var(--dark-gray);
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .dashboard-container {
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: 25px;
        }

        .sidebar {
            background: rgba(10, 26, 77, 0.7);
            border-radius: 15px;
            padding: 25px;
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .sidebar-title {
            font-size: 18px;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--accent-yellow);
        }

        .trader-list {
            list-style: none;
        }

        .trader-item {
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.05);
        }

        .trader-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .trader-item.active {
            background: var(--secondary-blue);
            box-shadow: 0 5px 15px rgba(0, 60, 255, 0.3);
        }

        .trader-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--accent-yellow);
            color: var(--dark-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
            box-shadow: 0 0 10px rgba(255, 204, 0, 0.3);
        }

        .trader-details {
            flex: 1;
        }

        .trader-name {
            font-weight: 600;
            margin-bottom: 3px;
        }

        .trader-stats {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            opacity: 0.8;
        }

        .performance-badge {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            margin-top: 10px;
        }

        .good {
            background: rgba(0, 230, 118, 0.15);
            color: var(--success);
        }

        .average {
            background: rgba(255, 196, 0, 0.15);
            color: var(--warning);
        }

        .poor {
            background: rgba(255, 82, 82, 0.15);
            color: var(--danger);
        }

        .main-content {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 25px;
        }

        .card {
            background: rgba(10, 26, 77, 0.7);
            border-radius: 15px;
            padding: 25px;
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .card-title {
            font-size: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--accent-yellow);
        }

        .performance-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 25px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: translateY(-3px);
        }

        .stat-value {
            font-size: 28px;
            font-weight: bold;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
        }

        .stat-label {
            font-size: 14px;
            opacity: 0.8;
        }

        .profit {
            color: var(--success);
            text-shadow: 0 0 10px rgba(0, 230, 118, 0.3);
        }

        .loss {
            color: var(--danger);
            text-shadow: 0 0 10px rgba(255, 82, 82, 0.3);
        }

        .chart-container {
            height: 280px;
            position: relative;
            margin: 25px 0;
        }

        .recent-trades {
            grid-column: span 2;
        }

        .table-container {
            overflow-x: auto;
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.2);
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--grid-color);
        }

        th {
            font-weight: 600;
            opacity: 0.8;
            color: var(--accent-yellow);
        }

        .winning-trade {
            background: rgba(0, 230, 118, 0.08);
        }

        .losing-trade {
            background: rgba(255, 82, 82, 0.08);
        }

        .running-trade {
            background: rgba(255, 196, 0, 0.08);
        }

        .trade-form {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
            opacity: 0.8;
        }

        .form-control {
            width: 100%;
            padding: 14px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            color: var(--white);
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--accent-yellow);
            box-shadow: 0 0 0 2px rgba(255, 204, 0, 0.2);
            background: rgba(255, 255, 255, 0.12);
        }

        select.form-control {
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 1rem center;
            background-size: 1em;
        }

        .btn {
            padding: 14px 24px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--accent-yellow);
            color: var(--dark-gray);
            box-shadow: 0 4px 15px rgba(255, 204, 0, 0.3);
        }

        .btn-primary:hover {
            background: #e6b800;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 204, 0, 0.4);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: var(--white);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .btn-danger {
            background: rgba(255, 82, 82, 0.2);
            color: var(--danger);
        }

        .btn-danger:hover {
            background: rgba(255, 82, 82, 0.3);
        }

        .btn-block {
            width: 100%;
            grid-column: span 2;
        }

        .report-section {
            grid-column: span 3;
        }

        .report-actions {
            display: flex;
            gap: 20px;
            margin-top: 25px;
        }

        .performance-summary {
            display: flex;
            gap: 25px;
            margin-top: 25px;
        }

        .summary-card {
            flex: 1;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .summary-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        /* Live Trading Section */
        .live-trading-section {
            grid-column: span 3;
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 25px;
        }

        .live-trades {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
            max-height: 300px;
            overflow-y: auto;
        }

        .live-trade {
            padding: 12px;
            margin-bottom: 10px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .trade-info {
            display: flex;
            flex-direction: column;
        }

        .trade-asset {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .trade-meta {
            font-size: 12px;
            opacity: 0.8;
            display: flex;
            gap: 15px;
        }

        .trade-pnl {
            font-weight: bold;
            font-family: 'Courier New', monospace;
            font-size: 16px;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-left: 10px;
        }

        .status-win {
            background: var(--success);
            box-shadow: 0 0 10px var(--success);
        }

        .status-loss {
            background: var(--danger);
            box-shadow: 0 0 10px var(--danger);
        }

        .status-running {
            background: var(--warning);
            box-shadow: 0 0 10px var(--warning);
        }

        /* Trader Dashboard */
        .trader-dashboard {
            display: none;
            grid-column: 1 / -1;
        }

        .trader-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .trader-header-info {
            flex: 1;
        }

        .trader-stats-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .time-filter {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-btn:hover, .filter-btn.active {
            background: var(--accent-yellow);
            color: var(--dark-gray);
        }

        .back-to-dashboard {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 20px;
            cursor: pointer;
            color: var(--accent-yellow);
            font-weight: 600;
        }

        /* Motivational Section */
        .motivational-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            text-align: center;
            border-left: 4px solid var(--accent-yellow);
        }

        .motivational-quote {
            font-size: 18px;
            font-style: italic;
            margin-bottom: 15px;
            color: var(--accent-yellow);
        }

        .motivational-author {
            font-size: 14px;
            opacity: 0.8;
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: rgba(10, 26, 77, 0.9);
            border-radius: 15px;
            padding: 30px;
            width: 500px;
            max-width: 90%;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-close {
            font-size: 24px;
            cursor: pointer;
            opacity: 0.7;
        }

        .modal-close:hover {
            opacity: 1;
        }

        .modal-title {
            color: var(--accent-yellow);
            font-size: 24px;
        }

        /* Password Modal */
        .password-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* Delete Confirmation */
        .delete-confirmation {
            text-align: center;
            padding: 20px 0;
        }

        .confirmation-buttons {
            display: flex;
            gap: 15px;
            margin-top: 25px;
        }

        .confirmation-buttons button {
            flex: 1;
        }

        /* Button Group */
        .button-group {
            display: flex;
            gap: 10px;
        }

        /* Hosting Guide Section */
        .hosting-guide {
            display: none;
        }

        /* Responsive design */
        @media (max-width: 1200px) {
            .dashboard-container {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .recent-trades {
                grid-column: span 2;
            }
        }

        @media (max-width: 900px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .recent-trades, .report-section {
                grid-column: span 1;
            }
            
            .performance-stats {
                grid-template-columns: 1fr;
            }
            
            .trade-form {
                grid-template-columns: 1fr;
            }
            
            .btn-block {
                grid-column: span 1;
            }
            
            .live-trading-section {
                grid-template-columns: 1fr;
            }
            
            .trader-stats-container {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 600px) {
            .header {
                flex-direction: column;
                gap: 20px;
            }
            
            .performance-summary {
                flex-direction: column;
            }
            
            .trader-stats-container {
                grid-template-columns: 1fr;
            }
            
            .button-group {
                flex-direction: column;
                gap: 5px;
            }
            
            .confirmation-buttons {
                flex-direction: column;
            }
        }

        /* Animations */
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 204, 0, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(255, 204, 0, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 204, 0, 0); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--secondary-blue);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent-yellow);
        }
    </style>
</head>
<body>
    <div class="candlestick-bg"></div>
    
    <div class="container">
        <header>
            <div class="logo" id="mainLogo">
                <div class="logo-icon pulse">T2R</div>
                <h1>Trade2Retire</h1>
            </div>
            <div class="user-info">
                <div class="user-avatar">P</div>
                <div>
                    <div id="currentUserName">Prince (Team Leader)</div>
                    <div class="role-badge" id="currentUserRole">Director of Technical Analytics & Academy</div>
                </div>
            </div>
        </header>

        <div class="dashboard-container">
            <div class="sidebar">
                <h2 class="sidebar-title"><i class="fas fa-chart-line"></i> Traders Performance</h2>
                <ul class="trader-list" id="traderList">
                    <!-- Traders will be dynamically added here -->
                </ul>
            </div>

            <div class="main-content" id="mainDashboard">
                <!-- Director Dashboard Overview -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title"><i class="fas fa-tachometer-alt"></i> Overall Performance</h3>
                    </div>
                    <div class="performance-stats">
                        <div class="stat-card">
                            <div class="stat-label">Total Profit</div>
                            <div class="stat-value profit" id="overallProfit">$24,750</div>
                            <div class="stat-label">Last 30 Days</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Win Rate</div>
                            <div class="stat-value" id="overallWinRate">85%</div>
                            <div class="stat-label">All Traders</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Avg. Drawdown</div>
                            <div class="stat-value" id="overallDrawdown">8.2%</div>
                            <div class="stat-label">Risk Level</div>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="overallPerformanceChart"></canvas>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title"><i class="fas fa-user"></i> Top Performer</h3>
                    </div>
                    <div style="text-align: center; padding: 20px 0;" id="topPerformerContainer">
                        <div class="trader-avatar" style="width: 80px; height: 80px; font-size: 28px; margin: 0 auto 20px;">V</div>
                        <h3>Virtue</h3>
                        <div class="performance-badge good">Top Performer</div>
                        <div class="stat-value profit" style="font-size: 24px; margin: 15px 0;">$15,890</div>
                        <div class="stat-label">Profit this month</div>
                        <div class="motivational-section" style="margin-top: 20px;">
                            <div class="motivational-quote">"Success in trading comes from discipline, not emotion."</div>
                            <div class="motivational-author">- Trading Wisdom</div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title"><i class="fas fa-exclamation-triangle"></i> Needs Attention</h3>
                    </div>
                    <div style="text-align: center; padding: 20px 0;" id="needsAttentionContainer">
                        <div class="trader-avatar" style="width: 80px; height: 80px; font-size: 28px; margin: 0 auto 20px;">TJ</div>
                        <h3>Teejay</h3>
                        <div class="performance-badge poor">Needs Improvement</div>
                        <div class="stat-value loss" style="font-size: 24px; margin: 15px 0;">-$1,250</div>
                        <div class="stat-label">Profit this month</div>
                        <div class="motivational-section" style="margin-top: 20px;">
                            <div class="motivational-quote">"Losses are tuition for trading education. Learn and grow."</div>
                            <div class="motivational-author">- Market Proverb</div>
                        </div>
                    </div>
                </div>

                <!-- Live Trading Updates -->
                <div class="card live-trading-section">
                    <div>
                        <div class="card-header">
                            <h3 class="card-title"><i class="fas fa-bolt"></i> Live Trading Activity</h3>
                            <button class="btn btn-primary" id="refreshLiveTrades"><i class="fas fa-sync"></i> Refresh</button>
                        </div>
                        <div class="live-trades" id="liveTradesContainer">
                            <!-- Live trades will be added here by JavaScript -->
                        </div>
                    </div>
                    <div>
                        <div class="card-header">
                            <h3 class="card-title"><i class="fas fa-plus-circle"></i> New Trade Entry</h3>
                        </div>
                        <div class="trade-form">
                            <div class="form-group">
                                <label for="trader">Trader</label>
                                <select class="form-control" id="trader">
                                    <!-- Traders will be added dynamically -->
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="asset">Asset</label>
                                <input type="text" class="form-control" id="asset" placeholder="e.g. AAPL, BTC/USD">
                            </div>
                            <div class="form-group">
                                <label for="entry">Entry Price</label>
                                <input type="number" class="form-control" id="entry" placeholder="0.00" step="0.01">
                            </div>
                            <div class="form-group">
                                <label for="exit">Exit Price</label>
                                <input type="number" class="form-control" id="exit" placeholder="0.00" step="0.01">
                            </div>
                            <div class="form-group">
                                <label for="duration">Duration</label>
                                <select class="form-control" id="duration">
                                    <option>Scalp (minutes)</option>
                                    <option>Day Trade</option>
                                    <option>Swing Trade (days)</option>
                                    <option>Position Trade (weeks+)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="status">Status</label>
                                <select class="form-control" id="status">
                                    <option>Running</option>
                                    <option>Win</option>
                                    <option>Loss</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="pnl">P&L ($)</label>
                                <input type="number" class="form-control" id="pnl" placeholder="0.00" step="0.01">
                            </div>
                            <button class="btn btn-primary btn-block" id="submitTrade">
                                <i class="fas fa-paper-plane"></i> Submit Trade
                            </button>
                        </div>
                    </div>
                </div>

                <div class="card recent-trades">
                    <div class="card-header">
                        <h3 class="card-title"><i class="fas fa-list"></i> Recent Trades</h3>
                        <div class="button-group">
                            <button class="btn btn-primary" id="exportTrades"><i class="fas fa-download"></i> Export</button>
                        </div>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Trader</th>
                                    <th>Asset</th>
                                    <th>Entry</th>
                                    <th>Exit</th>
                                    <th>Duration</th>
                                    <th>P&L</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="recentTradesBody">
                                <!-- Recent trades will be added here by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="card report-section">
                    <div class="card-header">
                        <h3 class="card-title"><i class="fas fa-file-alt"></i> Performance Reports</h3>
                    </div>
                    <p>Generate and submit performance reports to management</p>
                    <div class="report-actions">
                        <button class="btn btn-primary"><i class="fas fa-sun"></i> Daily Report</button>
                        <button class="btn btn-primary"><i class="fas fa-calendar-week"></i> Weekly Report</button>
                        <button class="btn btn-primary"><i class="fas fa-calendar"></i> Monthly Report</button>
                        <button class="btn btn-primary"><i class="fas fa-chart-pie"></i> Quarterly Analysis</button>
                    </div>
                    <div class="performance-summary">
                        <div class="summary-card">
                            <div class="stat-label">Last Daily Report</div>
                            <div class="stat-value">Jun 29</div>
                            <div class="stat-label profit">Submitted</div>
                        </div>
                        <div class="summary-card">
                            <div class="stat-label">Last Weekly Report</div>
                            <div class="stat-value">Jun 23-29</div>
                            <div class="stat-label profit">Submitted</div>
                        </div>
                        <div class="summary-card">
                            <div class="stat-label">Monthly Report Due</div>
                            <div class="stat-value">Jul 5</div>
                            <div class="stat-label warning">Pending</div>
                        </div>
                        <div class="summary-card">
                            <div class="stat-label">Quarterly Analysis</div>
                            <div class="stat-value">Q2 2025</div>
                            <div class="stat-label warning">In Progress</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Trader Dashboard -->
            <div class="trader-dashboard" id="traderDashboard">
                <div class="back-to-dashboard" id="backToDashboard">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                </div>
                
                <div class="trader-header">
                    <div class="trader-avatar" id="traderAvatar" style="width: 80px; height: 80px; font-size: 28px;"></div>
                    <div class="trader-header-info">
                        <h2 id="traderName">Timi</h2>
                        <div class="performance-badge" id="traderPerformance"></div>
                    </div>
                    <div class="trader-stats">
                        <div>Total Profit: <span class="profit" id="traderTotalProfit">$0</span></div>
                        <div>Win Rate: <span id="traderWinRate">0%</span></div>
                        <div>Total Trades: <span id="traderTotalTrades">0</span></div>
                    </div>
                </div>
                
                <div class="time-filter">
                    <div class="filter-btn active" data-filter="today">Today</div>
                    <div class="filter-btn" data-filter="week">This Week</div>
                    <div class="filter-btn" data-filter="month">This Month</div>
                    <div class="filter-btn" data-filter="all">All Time</div>
                </div>
                
                <div class="motivational-section" id="traderMotivation">
                    <div class="motivational-quote">"The stock market is filled with individuals who know the price of everything, but the value of nothing."</div>
                    <div class="motivational-author">- Philip Fisher</div>
                </div>
                
                <div class="trader-stats-container">
                    <div class="stat-card">
                        <div class="stat-label">Daily Profit</div>
                        <div class="stat-value" id="dailyProfit">$0</div>
                        <div class="stat-label">Today</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Weekly Profit</div>
                        <div class="stat-value" id="weeklyProfit">$0</div>
                        <div class="stat-label">This Week</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Monthly Profit</div>
                        <div class="stat-value" id="monthlyProfit">$0</div>
                        <div class="stat-label">This Month</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Success Rate</div>
                        <div class="stat-value" id="successRate">0%</div>
                        <div class="stat-label">Win/Loss Ratio</div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title"><i class="fas fa-chart-line"></i> Performance Trend</h3>
                    </div>
                    <div class="chart-container">
                        <canvas id="traderPerformanceChart"></canvas>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title"><i class="fas fa-list"></i> Trade History</h3>
                        <div>
                            <button class="btn btn-primary" id="exportTraderTrades"><i class="fas fa-download"></i> Export</button>
                        </div>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Asset</th>
                                    <th>Entry</th>
                                    <th>Exit</th>
                                    <th>Duration</th>
                                    <th>P&L</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="traderTradesBody">
                                <!-- Trader trades will be added here by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Password Modal -->
    <div class="modal-overlay" id="passwordModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Trader Login</h3>
                <div class="modal-close" id="closePasswordModal">&times;</div>
            </div>
            <div class="password-form">
                <div class="form-group">
                    <label for="password">Enter Password for <span id="traderLoginName" style="color: var(--accent-yellow);">Timi</span></label>
                    <input type="password" class="form-control" id="password" placeholder="Your password">
                </div>
                <button class="btn btn-primary btn-block" id="submitPassword">
                    <i class="fas fa-lock"></i> Access Dashboard
                </button>
                <p style="text-align: center; margin-top: 15px; opacity: 0.7;">
                    <i class="fas fa-info-circle"></i> Contact Prince if you forgot your password
                </p>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal-overlay" id="deleteModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Confirm Deletion</h3>
                <div class="modal-close" id="closeDeleteModal">&times;</div>
            </div>
            <div class="delete-confirmation">
                <i class="fas fa-exclamation-triangle" style="font-size: 48px; color: var(--danger); margin-bottom: 20px;"></i>
                <h3>Are you sure you want to delete this trade?</h3>
                <p>This action cannot be undone. All trade data will be permanently removed.</p>
                <div class="confirmation-buttons">
                    <button class="btn btn-secondary" id="cancelDelete">Cancel</button>
                    <button class="btn btn-danger" id="confirmDelete">Delete Trade</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Store for all trades
        let allTrades = [];
        let currentTrader = null;
        let tradeToDelete = null;
        
        // Sample data for initial traders with passwords
        const initialTraders = [
            { 
                id: 1, 
                name: "Timi", 
                avatar: "T", 
                password: "trade123", 
                role: "trader",
                performance: "Excellent", 
                profit: 12420, 
                winRate: 78, 
                totalTrades: 42, 
                dailyProfit: 1240, 
                weeklyProfit: 3850, 
                monthlyProfit: 12420 
            },
            { 
                id: 2, 
                name: "Bishop", 
                avatar: "B", 
                password: "bishop456", 
                role: "trader",
                performance: "Good", 
                profit: 8350, 
                winRate: 65, 
                totalTrades: 38, 
                dailyProfit: 650, 
                weeklyProfit: 2100, 
                monthlyProfit: 8350 
            },
            { 
                id: 3, 
                name: "Virtue", 
                avatar: "V", 
                password: "virtue789", 
                role: "trader",
                performance: "Top Performer", 
                profit: 15890, 
                winRate: 82, 
                totalTrades: 46, 
                dailyProfit: 1850, 
                weeklyProfit: 5420, 
                monthlyProfit: 15890 
            },
            { 
                id: 4, 
                name: "Prince", 
                avatar: "P", 
                password: "director", 
                role: "director",
                performance: "Director", 
                profit: 24750, 
                winRate: 85, 
                totalTrades: 52, 
                dailyProfit: 2100, 
                weeklyProfit: 6850, 
                monthlyProfit: 24750 
            },
            { 
                id: 5, 
                name: "Teejay", 
                avatar: "TJ", 
                password: "teejaypass", 
                role: "trader",
                performance: "Needs Improvement", 
                profit: -1250, 
                winRate: 48, 
                totalTrades: 35, 
                dailyProfit: -320, 
                weeklyProfit: -850, 
                monthlyProfit: -1250 
            },
            { 
                id: 6, 
                name: "Oscar", 
                avatar: "O", 
                password: "oscar2023", 
                role: "trader",
                performance: "Average", 
                profit: 5680, 
                winRate: 62, 
                totalTrades: 40, 
                dailyProfit: 480, 
                weeklyProfit: 1520, 
                monthlyProfit: 5680 
            }
        ];
        
        // Motivational quotes for different performance levels
        const motivationalQuotes = {
            good: [
                "Your discipline is paying off! Keep executing your strategy.",
                "Consistency is key. You're showing great trading habits!",
                "Well done! Your risk management is exemplary.",
                "Success in trading comes from discipline, not emotion.",
                "You're mastering the art of patience and timing."
            ],
            average: [
                "Every trade is a learning opportunity. Review and refine.",
                "Focus on your process, not just the outcomes.",
                "Trading is a marathon, not a sprint. Stay consistent.",
                "The market rewards patience and discipline.",
                "Small consistent gains lead to big results over time."
            ],
            poor: [
                "Losses are tuition for trading education. Learn and grow.",
                "This is a temporary setback. Analyze and improve.",
                "Every great trader has faced losses. What matters is how you bounce back.",
                "Focus on risk management. Protect your capital.",
                "The market doesn't reward emotion. Stick to your plan."
            ],
            new: [
                "Welcome! Your trading journey begins now. Focus on learning.",
                "Start with small positions and build your confidence.",
                "Every master was once a beginner. Take it one trade at a time.",
                "Focus on risk management first. Protect your capital.",
                "Document every trade. Your journal is your best teacher."
            ]
        };
        
        // Function to get a random motivational quote
        function getMotivationalQuote(performance) {
            const category = performance === "new" ? "new" : 
                           performance.includes("Excellent") || performance.includes("Top") ? "good" :
                           performance.includes("Good") || performance.includes("Average") ? "average" : "poor";
            
            const quotes = motivationalQuotes[category];
            return quotes[Math.floor(Math.random() * quotes.length)];
        }
        
        // Function to render traders in sidebar
        function renderTraders() {
            const traderList = document.getElementById('traderList');
            const traderSelect = document.getElementById('trader');
            
            traderList.innerHTML = '';
            traderSelect.innerHTML = '';
            
            initialTraders.forEach(trader => {
                // Add to sidebar list
                const listItem = document.createElement('li');
                listItem.className = 'trader-item';
                listItem.setAttribute('data-id', trader.id);
                listItem.innerHTML = `
                    <div class="trader-avatar">${trader.avatar}</div>
                    <div class="trader-details">
                        <div class="trader-name">${trader.name}</div>
                        <div class="trader-stats">
                            <span>Profit: <span class="${trader.profit >= 0 ? 'profit' : 'loss'}">${trader.profit >= 0 ? '$' + trader.profit : '-$' + Math.abs(trader.profit)}</span></span>
                            <span>Win Rate: ${trader.winRate}%</span>
                        </div>
                        <div class="performance-badge ${trader.performance === "Excellent" || trader.performance === "Top Performer" ? "good" : trader.performance === "Good" || trader.performance === "Average" ? "average" : "poor"}">${trader.performance}</div>
                    </div>
                `;
                traderList.appendChild(listItem);
                
                // Add to trade form select
                const option = document.createElement('option');
                option.value = trader.id;
                option.textContent = trader.name;
                traderSelect.appendChild(option);
                
                // Add click event
                listItem.addEventListener('click', function() {
                    const traderId = parseInt(this.getAttribute('data-id'));
                    const trader = initialTraders.find(t => t.id === traderId);
                    if (trader) {
                        currentTrader = trader;
                        document.getElementById('traderLoginName').textContent = trader.name;
                        document.getElementById('passwordModal').style.display = 'flex';
                    }
                });
            });
            
            // Add "Add New Trader" option
            const addTraderItem = document.createElement('li');
            addTraderItem.className = 'trader-item';
            addTraderItem.innerHTML = `
                <div class="trader-avatar">+</div>
                <div>Add New Trader</div>
            `;
            addTraderItem.addEventListener('click', showAddTraderModal);
            traderList.appendChild(addTraderItem);
        }
        
        // Function to show trader dashboard after password verification
        function showTraderDashboard() {
            if (!currentTrader) return;
            
            // Update user info in header
            document.getElementById('currentUserName').textContent = currentTrader.name;
            document.getElementById('currentUserRole').textContent = currentTrader.role === "director" ? 
                "Director of Technical Analytics & Academy" : "Trader";
            
            // Hide main dashboard
            document.getElementById('mainDashboard').style.display = 'none';
            // Show trader dashboard
            document.getElementById('traderDashboard').style.display = 'grid';
            
            // Update trader info
            document.getElementById('traderName').textContent = currentTrader.name;
            document.getElementById('traderAvatar').textContent = currentTrader.avatar;
            
            // Set trader stats
            document.getElementById('traderTotalProfit').textContent = currentTrader.profit >= 0 ? `$${currentTrader.profit}` : `-$${Math.abs(currentTrader.profit)}`;
            document.getElementById('traderTotalProfit').className = currentTrader.profit >= 0 ? 'profit' : 'loss';
            document.getElementById('traderWinRate').textContent = `${currentTrader.winRate}%`;
            document.getElementById('traderTotalTrades').textContent = currentTrader.totalTrades;
            document.getElementById('dailyProfit').textContent = currentTrader.dailyProfit >= 0 ? `$${currentTrader.dailyProfit}` : `-$${Math.abs(currentTrader.dailyProfit)}`;
            document.getElementById('dailyProfit').className = currentTrader.dailyProfit >= 0 ? 'profit' : 'loss';
            document.getElementById('weeklyProfit').textContent = currentTrader.weeklyProfit >= 0 ? `$${currentTrader.weeklyProfit}` : `-$${Math.abs(currentTrader.weeklyProfit)}`;
            document.getElementById('weeklyProfit').className = currentTrader.weeklyProfit >= 0 ? 'profit' : 'loss';
            document.getElementById('monthlyProfit').textContent = currentTrader.monthlyProfit >= 0 ? `$${currentTrader.monthlyProfit}` : `-$${Math.abs(currentTrader.monthlyProfit)}`;
            document.getElementById('monthlyProfit').className = currentTrader.monthlyProfit >= 0 ? 'profit' : 'loss';
            document.getElementById('successRate').textContent = `${currentTrader.winRate}%`;
            
            // Set performance badge
            const performanceBadge = document.getElementById('traderPerformance');
            performanceBadge.className = 'performance-badge ';
            if (currentTrader.performance.includes("Excellent") || currentTrader.performance.includes("Top")) {
                performanceBadge.classList.add('good');
            } else if (currentTrader.performance.includes("Good") || currentTrader.performance.includes("Average")) {
                performanceBadge.classList.add('average');
            } else {
                performanceBadge.classList.add('poor');
            }
            performanceBadge.textContent = currentTrader.performance;
            
            // Update motivational quote
            const quote = getMotivationalQuote(currentTrader.performance);
            document.querySelector('#traderMotivation .motivational-quote').textContent = `"${quote}"`;
            
            // Render trader trades
            renderTraderTrades();
            
            // Initialize trader performance chart
            initTraderPerformanceChart();
        }
        
        // Function to render trader trades
        function renderTraderTrades() {
            const tbody = document.getElementById('traderTradesBody');
            tbody.innerHTML = '';
            
            if (!currentTrader) return;
            
            // Filter trades for this trader
            const traderTrades = allTrades.filter(trade => trade.traderId === currentTrader.id);
            
            if (traderTrades.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="8" style="text-align: center; padding: 30px;">
                            <i class="fas fa-chart-line" style="font-size: 48px; margin-bottom: 15px; opacity: 0.3;"></i>
                            <h3>No trades recorded yet</h3>
                            <p>Submit your first trade to start tracking your performance!</p>
                        </td>
                    </tr>
                `;
                return;
            }
            
            traderTrades.forEach(trade => {
                const row = document.createElement('tr');
                row.className = trade.status === "Win" ? "winning-trade" : 
                                 trade.status === "Loss" ? "losing-trade" : "running-trade";
                
                const pnlClass = trade.pnl >= 0 ? "profit" : "loss";
                const pnlSign = trade.pnl >= 0 ? "+" : "";
                
                row.innerHTML = `
                    <td>${trade.date}</td>
                    <td>${trade.asset}</td>
                    <td>$${trade.entry.toFixed(2)}</td>
                    <td>$${trade.exit.toFixed(2)}</td>
                    <td>${trade.duration}</td>
                    <td class="${pnlClass}">${pnlSign}$${Math.abs(trade.pnl)}</td>
                    <td>
                        <span class="performance-badge ${trade.status === "Win" ? "good" : trade.status === "Loss" ? "poor" : "average"}">
                            ${trade.status}
                        </span>
                    </td>
                    <td>
                        <button class="btn btn-danger delete-trade" data-id="${trade.id}">
                            <i class="fas fa-trash-alt"></i>
                        </button>
                    </td>
                `;
                
                tbody.appendChild(row);
            });
            
            // Add delete event listeners
            document.querySelectorAll('.delete-trade').forEach(btn => {
                btn.addEventListener('click', function() {
                    const tradeId = parseInt(this.getAttribute('data-id'));
                    tradeToDelete = allTrades.find(t => t.id === tradeId);
                    if (tradeToDelete) {
                        document.getElementById('deleteModal').style.display = 'flex';
                    }
                });
            });
        }
        
        // Function to initialize trader performance chart
        function initTraderPerformanceChart() {
            const ctx = document.getElementById('traderPerformanceChart').getContext('2d');
            
            // Destroy existing chart if it exists
            if (window.traderPerformanceChart) {
                window.traderPerformanceChart.destroy();
            }
            
            if (!currentTrader) return;
            
            // Generate performance trend based on trader's profit
            const performanceTrend = [];
            let cumulative = 0;
            for (let i = 0; i < 12; i++) {
                cumulative += Math.round(currentTrader.profit / 12 * (0.8 + Math.random() * 0.4));
                performanceTrend.push(cumulative);
            }
            
            window.traderPerformanceChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                    datasets: [{
                        label: 'Cumulative Profit',
                        data: performanceTrend,
                        borderColor: '#ffcc00',
                        backgroundColor: 'rgba(255, 204, 0, 0.1)',
                        borderWidth: 3,
                        pointBackgroundColor: '#ffcc00',
                        pointRadius: 5,
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.7)',
                                callback: function(value) {
                                    return '$' + value.toLocaleString();
                                }
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.7)'
                            }
                        }
                    }
                }
            });
        }
        
        // Function to show add trader modal
        function showAddTraderModal() {
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>Add New Trader</h3>
                        <div class="modal-close">&times;</div>
                    </div>
                    <div class="form-group">
                        <label for="newTraderName">Full Name</label>
                        <input type="text" class="form-control" id="newTraderName" placeholder="Enter trader's full name">
                    </div>
                    <div class="form-group">
                        <label for="newTraderAvatar">Avatar Initial</label>
                        <input type="text" class="form-control" id="newTraderAvatar" placeholder="Enter single initial" maxlength="1">
                    </div>
                    <div class="form-group">
                        <label for="newTraderPassword">Password</label>
                        <input type="password" class="form-control" id="newTraderPassword" placeholder="Create a password">
                    </div>
                    <div class="form-group">
                        <label for="newTraderRole">Role</label>
                        <select class="form-control" id="newTraderRole">
                            <option value="trader">Trader</option>
                            <option value="director">Director</option>
                        </select>
                    </div>
                    <button class="btn btn-primary btn-block" id="addNewTraderBtn">
                        <i class="fas fa-user-plus"></i> Create Trader Profile
                    </button>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Close modal
            modal.querySelector('.modal-close').addEventListener('click', function() {
                document.body.removeChild(modal);
            });
            
            // Add new trader
            modal.querySelector('#addNewTraderBtn').addEventListener('click', function() {
                const name = document.getElementById('newTraderName').value.trim();
                const avatar = document.getElementById('newTraderAvatar').value.trim().toUpperCase() || '?';
                const password = document.getElementById('newTraderPassword').value.trim();
                const role = document.getElementById('newTraderRole').value;
                
                if (!name || !password) {
                    alert("Please enter a name and password for the trader");
                    return;
                }
                
                // Create new trader
                const newTrader = {
                    id: Date.now(), // Unique ID
                    name: name,
                    avatar: avatar,
                    password: password,
                    role: role,
                    performance: "New Trader",
                    profit: 0,
                    winRate: 0,
                    totalTrades: 0,
                    dailyProfit: 0,
                    weeklyProfit: 0,
                    monthlyProfit: 0
                };
                
                initialTraders.push(newTrader);
                renderTraders();
                document.body.removeChild(modal);
            });
        }
        
        // Function to export trades as CSV
        function exportTrades(traderId = null) {
            let tradesToExport = traderId ? 
                allTrades.filter(trade => trade.traderId === traderId) : 
                allTrades;
            
            if (tradesToExport.length === 0) {
                alert("No trades to export");
                return;
            }
            
            // Create CSV content
            let csvContent = "Date,Trader,Asset,Entry,Exit,Duration,P&L,Status\n";
            
            tradesToExport.forEach(trade => {
                const trader = initialTraders.find(t => t.id === trade.traderId);
                csvContent += `"${trade.date}","${trader ? trader.name : 'Unknown'}","${trade.asset}",${trade.entry},${trade.exit},"${trade.duration}",${trade.pnl},"${trade.status}"\n`;
            });
            
            // Create download link
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement("a");
            const url = URL.createObjectURL(blob);
            
            link.setAttribute("href", url);
            link.setAttribute("download", traderId ? `trader_trades_${traderId}.csv` : "all_trades.csv");
            link.style.visibility = 'hidden';
            
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
        
        // Function to delete a trade
        function deleteTrade() {
            if (!tradeToDelete) return;
            
            // Remove trade from allTrades
            allTrades = allTrades.filter(trade => trade.id !== tradeToDelete.id);
            
            // Update localStorage
            localStorage.setItem('trades', JSON.stringify(allTrades));
            
            // Update views
            renderRecentTrades();
            if (document.getElementById('traderDashboard').style.display === 'grid') {
                renderTraderTrades();
            }
            
            // Close modal
            document.getElementById('deleteModal').style.display = 'none';
            tradeToDelete = null;
            
            alert("Trade has been successfully deleted!");
        }
        
        // Initialize the dashboard
        function initDashboard() {
            // Load trades from localStorage
            const savedTrades = localStorage.getItem('trades');
            if (savedTrades) {
                allTrades = JSON.parse(savedTrades);
            }
            
            renderTraders();
            renderRecentTrades();
            initOverallPerformanceChart();
            initLiveTrades();
            
            // Show motivational quotes
            document.querySelector('#topPerformerContainer .motivational-quote').textContent = 
                `"${getMotivationalQuote('good')}"`;
            document.querySelector('#needsAttentionContainer .motivational-quote').textContent = 
                `"${getMotivationalQuote('poor')}"`;
        }
        
        // Initialize live trades
        function initLiveTrades() {
            const liveTrades = [
                {
                    trader: "Virtue",
                    asset: "EUR/USD",
                    entry: 1.0854,
                    exit: 1.0902,
                    duration: "Scalp (minutes)",
                    pnl: 48.5,
                    status: "Win"
                },
                {
                    trader: "Prince",
                    asset: "TSLA",
                    entry: 182.34,
                    exit: 185.67,
                    duration: "Day Trade",
                    pnl: 333,
                    status: "Win"
                },
                {
                    trader: "Timi",
                    asset: "BTC/USD",
                    entry: 30045.00,
                    exit: 30210.50,
                    duration: "Scalp (minutes)",
                    pnl: 165.50,
                    status: "Win"
                },
                {
                    trader: "Teejay",
                    asset: "AAPL",
                    entry: 192.80,
                    exit: 191.40,
                    duration: "Swing Trade (days)",
                    pnl: -140,
                    status: "Loss"
                }
            ];
            
            liveTrades.forEach(trade => addLiveTrade(trade));
        }
        
        // Initialize overall performance chart
        function initOverallPerformanceChart() {
            const ctx = document.getElementById('overallPerformanceChart').getContext('2d');
            
            // Destroy existing chart if it exists
            if (window.overallPerformanceChart) {
                window.overallPerformanceChart.destroy();
            }
            
            // Sample performance data
            const performanceData = [12000, 14500, 13200, 16800, 19500, 22400, 21800, 23000, 24750];
            
            window.overallPerformanceChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep'],
                    datasets: [{
                        label: 'Total Profit',
                        data: performanceData,
                        borderColor: '#00e676',
                        backgroundColor: 'rgba(0, 230, 118, 0.1)',
                        borderWidth: 3,
                        pointBackgroundColor: '#00e676',
                        pointRadius: 5,
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.7)',
                                callback: function(value) {
                                    return '$' + value.toLocaleString();
                                }
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.7)'
                            }
                        }
                    }
                }
            });
        }
        
        // Function to render recent trades
        function renderRecentTrades() {
            const tbody = document.getElementById('recentTradesBody');
            tbody.innerHTML = '';
            
            if (allTrades.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="8" style="text-align: center; padding: 30px;">
                            <i class="fas fa-chart-line" style="font-size: 48px; margin-bottom: 15px; opacity: 0.3;"></i>
                            <h3>No trades recorded yet</h3>
                            <p>Submit your first trade to start tracking performance!</p>
                        </td>
                    </tr>
                `;
                return;
            }
            
            // Show only the most recent 8 trades
            const recentTrades = [...allTrades].reverse().slice(0, 8);
            
            recentTrades.forEach(trade => {
                const trader = initialTraders.find(t => t.id === trade.traderId);
                if (!trader) return;
                
                const row = document.createElement('tr');
                row.className = trade.status === "Win" ? "winning-trade" : 
                                 trade.status === "Loss" ? "losing-trade" : "running-trade";
                
                const pnlClass = trade.pnl >= 0 ? "profit" : "loss";
                const pnlSign = trade.pnl >= 0 ? "+" : "";
                
                row.innerHTML = `
                    <td>${trader.name}</td>
                    <td>${trade.asset}</td>
                    <td>$${trade.entry.toFixed(2)}</td>
                    <td>$${trade.exit.toFixed(2)}</td>
                    <td>${trade.duration}</td>
                    <td class="${pnlClass}">${pnlSign}$${Math.abs(trade.pnl)}</td>
                    <td>
                        <span class="performance-badge ${trade.status === "Win" ? "good" : trade.status === "Loss" ? "poor" : "average"}">
                            ${trade.status}
                        </span>
                    </td>
                    <td>
                        ${currentTrader && currentTrader.role === "director" ? 
                            `<button class="btn btn-danger delete-trade" data-id="${trade.id}">
                                <i class="fas fa-trash-alt"></i>
                            </button>` : 
                            `<span class="performance-badge">Director Only</span>`}
                    </td>
                `;
                
                tbody.appendChild(row);
            });
            
            // Add delete event listeners only for director
            if (currentTrader && currentTrader.role === "director") {
                document.querySelectorAll('.delete-trade').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const tradeId = parseInt(this.getAttribute('data-id'));
                        tradeToDelete = allTrades.find(t => t.id === tradeId);
                        if (tradeToDelete) {
                            document.getElementById('deleteModal').style.display = 'flex';
                        }
                    });
                });
            }
        }
        
        // Submit trade handler
        document.getElementById('submitTrade').addEventListener('click', function() {
            const traderId = parseInt(document.getElementById('trader').value);
            const asset = document.getElementById('asset').value;
            const entry = parseFloat(document.getElementById('entry').value);
            const exit = parseFloat(document.getElementById('exit').value);
            const duration = document.getElementById('duration').value;
            const status = document.getElementById('status').value;
            const pnl = parseFloat(document.getElementById('pnl').value);
            
            if (!asset || isNaN(entry) || isNaN(exit) || isNaN(pnl)) {
                alert("Please fill all required fields with valid data");
                return;
            }
            
            const trade = {
                id: Date.now(),
                traderId: traderId,
                asset: asset,
                entry: entry,
                exit: exit,
                duration: duration,
                pnl: pnl,
                status: status,
                date: new Date().toLocaleDateString()
            };
            
            // Add to trades
            allTrades.push(trade);
            localStorage.setItem('trades', JSON.stringify(allTrades));
            
            // Update recent trades
            renderRecentTrades();
            
            // Add to live trades
            const trader = initialTraders.find(t => t.id === traderId);
            if (trader) {
                const liveTrade = {
                    trader: trader.name,
                    asset: trade.asset,
                    entry: trade.entry,
                    exit: trade.exit,
                    duration: trade.duration,
                    pnl: trade.pnl,
                    status: trade.status
                };
                
                addLiveTrade(liveTrade);
            }
            
            // Reset form
            document.getElementById('asset').value = '';
            document.getElementById('entry').value = '';
            document.getElementById('exit').value = '';
            document.getElementById('pnl').value = '';
            
            // Show success message
            alert(`Trade submitted successfully!`);
        });
        
        // Function to add a live trade
        function addLiveTrade(trade) {
            const container = document.getElementById('liveTradesContainer');
            
            const tradeEl = document.createElement('div');
            tradeEl.className = 'live-trade';
            
            const pnlClass = trade.pnl >= 0 ? "profit" : "loss";
            const pnlSign = trade.pnl >= 0 ? "+" : "";
            const statusClass = trade.status === "Win" ? "status-win" : 
                               trade.status === "Loss" ? "status-loss" : "status-running";
            
            tradeEl.innerHTML = `
                <div class="trade-info">
                    <div class="trade-asset">${trade.asset} <span class="status-indicator ${statusClass}"></span></div>
                    <div class="trade-meta">
                        <span>${trade.trader}</span>
                        <span>Entry: $${trade.entry.toFixed(2)}</span>
                        <span>Exit: $${trade.exit.toFixed(2)}</span>
                    </div>
                </div>
                <div class="trade-pnl ${pnlClass}">${pnlSign}$${Math.abs(trade.pnl)}</div>
            `;
            
            container.prepend(tradeEl);
            
            // Remove oldest trade if more than 8
            if (container.children.length > 8) {
                container.removeChild(container.lastChild);
            }
        }
        
        // Export buttons
        document.getElementById('exportTrades').addEventListener('click', function() {
            exportTrades();
        });
        
        document.getElementById('exportTraderTrades').addEventListener('click', function() {
            if (currentTrader) {
                exportTrades(currentTrader.id);
            }
        });
        
        // Back to dashboard handler
        document.getElementById('backToDashboard').addEventListener('click', function() {
            document.getElementById('mainDashboard').style.display = 'grid';
            document.getElementById('traderDashboard').style.display = 'none';
            currentTrader = null;
            
            // Reset header to director view
            document.getElementById('currentUserName').textContent = "Prince (Team Leader)";
            document.getElementById('currentUserRole').textContent = "Director of Technical Analytics & Academy";
        });
        
        // Main logo click handler
        document.getElementById('mainLogo').addEventListener('click', function() {
            document.getElementById('mainDashboard').style.display = 'grid';
            document.getElementById('traderDashboard').style.display = 'none';
            currentTrader = null;
            
            // Reset header to director view
            document.getElementById('currentUserName').textContent = "Prince (Team Leader)";
            document.getElementById('currentUserRole').textContent = "Director of Technical Analytics & Academy";
        });
        
        // Password submission
        document.getElementById('submitPassword').addEventListener('click', function() {
            const password = document.getElementById('password').value;
            
            if (!currentTrader) {
                alert("No trader selected");
                return;
            }
            
            if (password === currentTrader.password) {
                document.getElementById('passwordModal').style.display = 'none';
                document.getElementById('password').value = '';
                showTraderDashboard();
            } else {
                alert("Incorrect password. Please try again.");
            }
        });
        
        // Close password modal
        document.getElementById('closePasswordModal').addEventListener('click', function() {
            document.getElementById('passwordModal').style.display = 'none';
            document.getElementById('password').value = '';
            currentTrader = null;
        });
        
        // Delete trade handlers
        document.getElementById('confirmDelete').addEventListener('click', deleteTrade);
        
        document.getElementById('cancelDelete').addEventListener('click', function() {
            document.getElementById('deleteModal').style.display = 'none';
            tradeToDelete = null;
        });
        
        document.getElementById('closeDeleteModal').addEventListener('click', function() {
            document.getElementById('deleteModal').style.display = 'none';
            tradeToDelete = null;
        });
        
        // Function to send reports via email
        function sendReport(reportType) {
            const traderName = document.getElementById('currentUserName').textContent;
            const subject = `${reportType} Report - ${new Date().toDateString()}`;
            const body = `Attached is the ${reportType} report generated by ${traderName}`;
            
            // Get report data (simplified for this example)
            const reportData = `${reportType} Report\n\nDate: ${new Date().toLocaleDateString()}\nGenerated by: ${traderName}`;
            
            // Create a Blob with the report data
            const blob = new Blob([reportData], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            
            // Create a download link
            const a = document.createElement('a');
            a.href = url;
            a.download = `${reportType}_Report_${new Date().toISOString().slice(0,10)}.txt`;
            document.body.appendChild(a);
            a.click();
            
            // Send email
            window.location.href = `mailto:trade2retire95@gmail.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
            
            alert(`${reportType} report has been sent to trade2retire95@gmail.com`);
        }
        
        // Add event listeners to report buttons
        document.querySelectorAll('.report-actions button').forEach(btn => {
            btn.addEventListener('click', function() {
                const reportType = this.textContent.replace(/\s*Report$/, '');
                sendReport(reportType);
            });
        });
        
        // Initialize the dashboard
        document.addEventListener('DOMContentLoaded', function() {
            // Start as director view
            currentTrader = initialTraders.find(t => t.role === "director");
            
            initDashboard();
            
            // Add sample trades for demonstration
            setTimeout(() => {
                if (allTrades.length === 0) {
                    allTrades = [
                        {
                            id: 1,
                            traderId: 1,
                            asset: "EURUSD",
                            entry: 1.0854,
                            exit: 1.0902,
                            duration: "Day Trade",
                            pnl: 60,
                            status: "Win",
                            date: "2023-06-30"
                        },
                        {
                            id: 2,
                            traderId: 4,
                            asset: "AAPL",
                            entry: 182.34,
                            exit: 185.67,
                            duration: "Swing Trade (days)",
                            pnl: 333,
                            status: "Win",
                            date: "2023-06-29"
                        },
                        {
                            id: 3,
                            traderId: 2,
                            asset: "BTC/USD",
                            entry: 30045.00,
                            exit: 30210.50,
                            duration: "Scalp (minutes)",
                            pnl: 165.50,
                            status: "Win",
                            date: "2023-06-28"
                        },
                        {
                            id: 4,
                            traderId: 5,
                            asset: "TSLA",
                            entry: 265.80,
                            exit: 262.40,
                            duration: "Day Trade",
                            pnl: -340,
                            status: "Loss",
                            date: "2023-06-27"
                        },
                        {
                            id: 5,
                            traderId: 3,
                            asset: "GBPJPY",
                            entry: 184.25,
                            exit: 184.85,
                            duration: "Scalp (minutes)",
                            pnl: 60,
                            status: "Win",
                            date: "2023-06-26"
                        },
                        {
                            id: 6,
                            traderId: 6,
                            asset: "MSFT",
                            entry: 340.10,
                            exit: 342.75,
                            duration: "Day Trade",
                            pnl: 265,
                            status: "Win",
                            date: "2023-06-25"
                        },
                        {
                            id: 7,
                            traderId: 1,
                            asset: "XAU/USD",
                            entry: 1920.40,
                            exit: 1915.80,
                            duration: "Swing Trade (days)",
                            pnl: -460,
                            status: "Loss",
                            date: "2023-06-24"
                        },
                        {
                            id: 8,
                            traderId: 4,
                            asset: "AMZN",
                            entry: 128.75,
                            exit: 130.20,
                            duration: "Position Trade (weeks+)",
                            pnl: 1450,
                            status: "Win",
                            date: "2023-06-23"
                        }
                    ];
                    
                    localStorage.setItem('trades', JSON.stringify(allTrades));
                    renderRecentTrades();
                }
            }, 500);
        });
    </script>
</body>
</html>
